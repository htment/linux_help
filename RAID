Чтобы удалить RAID-массив, очистить суперблоки и заново создать RAID 10 из 5 дисков с файловой системой ext4, выполните следующие шаги. Пожалуйста, будьте внимательны, так как эти действия приведут к потере всех данных на указанных дисках.

▎1. Удаление RAID-массива

Сначала необходимо остановить RAID-массив. В вашем случае RAID-массив называется md0. Используйте следующую команду:

Bash


sudo mdadm --stop /dev/md0


▎2. Очистка суперблоков

После остановки массива нужно очистить суперблоки на каждом из дисков, которые входили в RAID. Для этого используйте команду mdadm:

Bash


sudo mdadm --zero-superblock /dev/sdb
sudo mdadm --zero-superblock /dev/sdc
sudo mdadm --zero-superblock /dev/sdd
sudo mdadm --zero-superblock /dev/sde
sudo mdadm --zero-superblock /dev/sdf


▎3. Создание нового RAID 10

Теперь можно создать новый RAID 10 из 5 дисков. Используйте следующую команду:

Bash


sudo mdadm --create --verbose /dev/md0 --level=10 --raid-devices=5 /dev/sdb /dev/sdc /dev/sdd /dev/sde /dev/sdf


▎4. Проверка состояния RAID

Проверьте состояние нового RAID-массива:

Bash


cat /proc/mdstat


▎5. Создание файловой системы ext4

Теперь создайте файловую систему ext4 на новом RAID-массиве:

Bash


sudo mkfs.ext4 /dev/md0


▎6. Создание точки монтирования

Создайте каталог для монтирования, если он еще не существует:

Bash


sudo mkdir -p /raid_upl


▎7. Монтирование RAID

Теперь смонтируйте RAID-массив в созданный каталог:

Bash


sudo mount /dev/md0 /raid_upl


▎8. Автоматическое монтирование при загрузке

Чтобы автоматически монтировать RAID при загрузке, добавьте запись в файл /etc/fstab. Откройте его в текстовом редакторе:

Bash


sudo nano /etc/fstab


Добавьте следующую строку в конец файла:

copy


/dev/md0   /raid_upl   ext4   defaults   0   2


Сохраните файл и выйдите из редактора.

▎9. Проверка

После выполнения всех шагов проверьте, что RAID смонтирован правильно:

Bash


df -h


Если все сделано правильно, вы должны увидеть /dev/md0 смонтированным в /raid_upl.

▎Важно!

Убедитесь, что у вас есть резервные копии всех важных данных перед выполнением этих операций, так как они приведут к полной потере данных на указанных дисках.
